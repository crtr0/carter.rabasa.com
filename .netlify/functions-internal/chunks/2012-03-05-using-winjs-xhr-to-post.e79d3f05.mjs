const id = "2012-03-05-using-winjs-xhr-to-post.md";
const collection = "blog";
const slug = "2012-03-05-using-winjs-xhr-to-post";
const body = "\nIn the process of building a [Windows 8][] [Twilio][] app, I ran head first into an issue using [WinJS.xhr][] to send POST requests. The official documentation is pretty thin, so I thought I'd write-up how to accomplish this here.\n\nUsing WinJS.xhr in general is quite nice. It abstracts away all the nonesense of [XMLHttpRequest][] and provides a simple interface that uses [Promises][] to handle the asynchronous responses. Here's a simple example that uses the Twilio REST API to retrieve a list of SMS messages from a user's account:\n\n    WinJS.xhr({\n      user: accountSid, password: authKey,\n      url: \"https://api.twilio.com/2010-04-01/Accounts/\" + accountSid + \"/SMS/Messages.json\"\n    }).then(\n      function (success) {\n        console.log(JSON.parse(success.responseText));\n      },\n      function (error) {\n        console.log(JSON.parse(error.responseText));\n      }\n    );\n\nObviously, the example would be much shorter if I wasn't using HTTP BASIC auth and had defined some named functions for the callback. But hey, pretty simple! Anyway, what if you want to do a POST? We'll here's what _won't_ work:\n\n    WinJS.xhr({\n      type: \"post\", user: accountSid, password: authKey,\n      url: \"https://api.twilio.com/2010-04-01/Accounts/\" + accountSid + \"/Calls.json\",\n      data: dataString\n    }).then(success, error);\n\nYou'll notice I defined `type: \"post\"` to indicate that I want to POST. But, it turns out this is not enough. The answer to getting this to work is to manually set the response header. Here's some code that _does_ work:\n\n    WinJS.xhr({\n      type: \"post\", user: accountSid, password: authKey,\n      url: \"https://api.twilio.com/2010-04-01/Accounts/\" + accountSid + \"/Calls.json\",\n      headers: { \"Content-type\": \"application/x-www-form-urlencoded\" },\n      data: dataStr\n        }).then(success, error);\n\nThat's it. Just make sure to set:\n\n    headers: { \"Content-type\": \"application/x-www-form-urlencoded\" }\n\n..and you're good to go!\n\n[windows 8]: http://dev.windows.com\n[twilio]: http://twilio.com/api\n[winjs.xhr]: http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx\n[xmlhttprequest]: https://developer.mozilla.org/en/XMLHttpRequest\n[promises]: http://msdn.microsoft.com/en-us/library/windows/apps/hh464930.aspx\n";
const data = {title:"Using WinJS.xhr to POST",tags:["win8","winjs","twilio","rest"],published:true,pubDate:new Date(1330761600000)};
const _internal = {
	filePath: "/Users/crabasa/Code/carter.rabasa.com/src/content/blog/2012-03-05-using-winjs-xhr-to-post.md",
	rawData: "\ntitle: Using WinJS.xhr to POST\ntags: [win8, winjs, twilio, rest]\npublished: true\npubDate: Mar 03 2012",
};

export { _internal, body, collection, data, id, slug };
